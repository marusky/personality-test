var m=Object.defineProperty;var u=Object.getOwnPropertySymbols;var c=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var d=(e,t,s)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,i=(e,t)=>{for(var s in t||(t={}))c.call(t,s)&&d(e,s,t[s]);if(u)for(var s of u(t))b.call(t,s)&&d(e,s,t[s]);return e};(function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t(require("@hotwired/stimulus"),require("sortablejs"),require("@rails/request.js")):typeof define=="function"&&define.amd?define(["@hotwired/stimulus","sortablejs","@rails/request.js"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,e["stimulus-sortable"]=t(e.Stimulus,e.Sortable,e.Request.js))})(this,function(e,t,s){"use strict";function l(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var p=l(t);class n extends e.Controller{initialize(){this.onUpdate=this.onUpdate.bind(this)}connect(){this.sortable=new p.default(this.element,i(i({},this.defaultOptions),this.options))}disconnect(){this.sortable.destroy(),this.sortable=void 0}async onUpdate({item:r,newIndex:h}){if(!r.dataset.sortableUpdateUrl)return;const f=this.resourceNameValue?`${this.resourceNameValue}[${this.paramNameValue}]`:this.paramNameValue,o=new FormData;o.append(f,h+1),await s.patch(r.dataset.sortableUpdateUrl,{body:o,responseKind:this.responseKindValue})}get options(){return{animation:this.animationValue||this.defaultOptions.animation||150,handle:this.handleValue||this.defaultOptions.handle||void 0,onUpdate:this.onUpdate}}get defaultOptions(){return{}}}return n.values={resourceName:String,paramName:{type:String,default:"position"},responseKind:{type:String,default:"html"},animation:Number,handle:String},n});
